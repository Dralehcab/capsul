<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
  
    <title>CAPSUL &mdash; CAPSUL - Collaborative Analysis Platform: Simple, Unifying, Lean</title>
  <!-- htmltitle is before nature.css - we use this hack to load bootstrap first -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" media="screen" />
  <link rel="stylesheet" href="../../../_static/css/bootstrap-responsive.css"/>

    
    <link rel="stylesheet" href="../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="CAPSUL - Collaborative Analysis Platform: Simple, Unifying, Lean" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" />
  
   
       <script type="text/javascript" src="../../../_static/sidebar.js"></script>
   
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="../../../_static/js/bootstrap.min.js" type="text/javascript"></script>
  <!-- <link rel="canonical" href="https://bioproj.extra.cea.fr/redmine/projects/nsap/_modules/capsul/qt_apps/main_window.html" /> -->

  <script type="text/javascript">
    $("div.buttonNext, div.buttonPrevious").hover(
       function () {
           $(this).css('background-color', '#FF9C34');
       },
       function () {
           $(this).css('background-color', '#A7D6E2');
       }
    );
    var bodywrapper = $('.bodywrapper');
    var sidebarbutton = $('#sidebarbutton');
    sidebarbutton.css({'height': '900px'});
  </script>

  </head>
  <body>

<div class="header-wrapper">
  <div class="header">
    <p class="logo">
      <a href="../../../index.html">
        <img src="../../../_static/capsul.png" alt="Logo"/>
      </a>
    </p><div class="navbar">
      <ul>
        <li><a href="../../../index.html">Home</a></li>
        <li><a href="../../../installation.html">Installation</a></li>
        <li class="btn-li">
          <div class="btn-group">
		    <a href="../../../documentation.html">Documentation</a>
		    <a class="btn dropdown-toggle" data-toggle="dropdown">
		      <span class="caret"></span>
		    </a>
		    <ul class="dropdown-menu">
	          <li class="link-title">CAPSUL</li>
			  <li><a href="../../../user_guide_tree/index.html">User guide</a></li>
			  <li><a href="../../../api_tree/index.html">API</a></li>
			  <li><a href="../../../gui_tree/index.html">GUI</a></li>
			  <li class="divider"></li>
		      <li><a href="../../../developer_tree/index.html">Development</a></li>
		    </ul>
		  </div>
        </li>
        <li><a href="http://neurospin-wiki.org/">NeuroSpin Wiki</a></li>
      </ul>
    </div> <!-- end navbar --></div>
</div>


<div class="content-wrapper">
    <div class="sphinxsidebar">
      <div class="sphinxsidebarwrapper">

        <!-- info setup -->
          <p class="doc-version">
           This documentation is for CAPSUL <strong>version 1.1.0</strong>
          </p>
        <p class="citing">
          If you use the software, please do not esitate to 
          <a &mdash; <a href="https://bioproj.extra.cea.fr/redmine/projects/capsul/">
          Report a Bug</a>.
        </p>
        <!-- <form action="/scripts/nsap-src-message.php" method="post">
          <textarea rows="4" name="comments" style="width:175px">Enter here your comments</textarea>
          <center>
           <input type="submit" value="Send">
          </center>
        </form> -->

      <!-- toc tree -->
      

      </div>
    </div>
  

  <div class="content">
      
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for capsul.qt_apps.main_window</h1><div class="highlight"><pre>
<span class="c">#! /usr/bin/env python</span>
<span class="c">##########################################################################</span>
<span class="c"># CAPSUL - Copyright (C) CEA, 2013</span>
<span class="c"># Distributed under the terms of the CeCILL-B license, as published by</span>
<span class="c"># the CEA-CNRS-INRIA. Refer to the LICENSE file or to</span>
<span class="c"># http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.html</span>
<span class="c"># for details.</span>
<span class="c">##########################################################################</span>

<span class="c"># System import</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="c"># Define the logger</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="c"># Soma import</span>
<span class="kn">from</span> <span class="nn">soma.qt_gui.qt_backend</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWebKit</span>
<span class="kn">from</span> <span class="nn">soma.qt_gui.controller_widget</span> <span class="kn">import</span> <span class="n">ScrollControllerWidget</span>

<span class="c"># Capsul import</span>
<span class="kn">from</span> <span class="nn">capsul.qt_apps.utils.window</span> <span class="kn">import</span> <span class="n">MyQUiLoader</span>
<span class="kn">from</span> <span class="nn">capsul.qt_apps.utils.fill_treectrl</span> <span class="kn">import</span> <span class="n">fill_treectrl</span>
<span class="kn">from</span> <span class="nn">capsul.qt_gui.widgets</span> <span class="kn">import</span> <span class="p">(</span><span class="n">PipelineDevelopperView</span><span class="p">,</span> <span class="n">PipelineUserView</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">capsul.qt_gui.board_widget</span> <span class="kn">import</span> <span class="n">BoardWidget</span>
<span class="kn">from</span> <span class="nn">capsul.process</span> <span class="kn">import</span> <span class="n">get_process_instance</span>
<span class="kn">from</span> <span class="nn">capsul.pipeline.pipeline_iterative</span> <span class="kn">import</span> <span class="n">IterativePipeline</span>
<span class="kn">from</span> <span class="nn">capsul.study_config</span> <span class="kn">import</span> <span class="n">StudyConfig</span>


<div class="viewcode-block" id="CapsulMainWindow"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow">[docs]</a><span class="k">class</span> <span class="nc">CapsulMainWindow</span><span class="p">(</span><span class="n">MyQUiLoader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Capsul main window.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="CapsulMainWindow.__init__"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pipeline_menu</span><span class="p">,</span> <span class="n">ui_file</span><span class="p">,</span> <span class="n">default_study_config</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Method to initialize the Capsul main window class.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        pipeline_menu: hierachic dict</span>
<span class="sd">            each key is a sub module of the module. Leafs contain a list with</span>
<span class="sd">            the url to the documentation.</span>
<span class="sd">        ui_file: str (mandatory)</span>
<span class="sd">            a filename containing the user interface description</span>
<span class="sd">        default_study_config: ordered dict (madatory)</span>
<span class="sd">            some parameters for the study configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Inheritance: load user interface window</span>
        <span class="n">MyQUiLoader</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ui_file</span><span class="p">)</span>

        <span class="c"># Class parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_menu</span> <span class="o">=</span> <span class="n">pipeline_menu</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipelines</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_to_pipeline_doc</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c"># Define dynamic controls</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QAction</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;actionHelp&quot;</span><span class="p">,</span> <span class="s">&quot;actionQuit&quot;</span><span class="p">,</span> <span class="s">&quot;actionBrowse&quot;</span><span class="p">,</span>
                            <span class="s">&quot;actionLoad&quot;</span><span class="p">,</span> <span class="s">&quot;actionChangeView&quot;</span><span class="p">,</span>
                            <span class="s">&quot;actionParameters&quot;</span><span class="p">,</span> <span class="s">&quot;actionRun&quot;</span><span class="p">,</span>
                            <span class="s">&quot;actionStudyConfig&quot;</span><span class="p">,</span> <span class="s">&quot;actionQualityControl&quot;</span><span class="p">],</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;display&quot;</span><span class="p">,</span> <span class="p">],</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QDockWidget</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;dockWidgetBrowse&quot;</span><span class="p">,</span> <span class="s">&quot;dockWidgetParameters&quot;</span><span class="p">,</span>
                                <span class="s">&quot;dockWidgetStudyConfig&quot;</span><span class="p">,</span> <span class="s">&quot;dockWidgetBoard&quot;</span><span class="p">],</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QWidget</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;dock_browse&quot;</span><span class="p">,</span> <span class="s">&quot;dock_parameters&quot;</span><span class="p">,</span>
                            <span class="s">&quot;dock_study_config&quot;</span><span class="p">,</span> <span class="s">&quot;dock_board&quot;</span><span class="p">],</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QTreeWidget</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;menu_treectrl&quot;</span><span class="p">,</span> <span class="p">],</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QLineEdit</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;search&quot;</span><span class="p">,</span> <span class="p">],</span>
        <span class="p">}</span>

        <span class="c"># Add ui class parameter with the dynamic controls and initialize</span>
        <span class="c"># default values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_controls_to_ui</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">setTabsClosable</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="c"># Create the study configuration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">study_config</span> <span class="o">=</span> <span class="n">StudyConfig</span><span class="p">(</span><span class="n">default_study_config</span><span class="p">)</span>

        <span class="c"># Create the controller widget associated to the study</span>
        <span class="c"># configuration controller</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">study_config_widget</span> <span class="o">=</span> <span class="n">ScrollControllerWidget</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">study_config</span><span class="p">,</span> <span class="n">live</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetStudyConfig</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">study_config_widget</span><span class="p">)</span>

        <span class="c"># Create the pipeline menu</span>
        <span class="n">fill_treectrl</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">menu_treectrl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_menu</span><span class="p">)</span>

        <span class="c"># Signal for window interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionHelp</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onHelpClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionChangeView</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onChangeViewClicked</span><span class="p">)</span>

        <span class="c"># Signal for tab widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onCurrentTabChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">tabCloseRequested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onCloseTabClicked</span><span class="p">)</span>

        <span class="c"># Signal for dock widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionBrowse</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onBrowseClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionParameters</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onParametersClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionStudyConfig</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onStudyConfigClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionQualityControl</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onQualityControlClicked</span><span class="p">)</span>

        <span class="c"># Initialize properly the visibility of each dock widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onBrowseClicked</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onParametersClicked</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onStudyConfigClicked</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onQualityControlClicked</span><span class="p">()</span>

        <span class="c"># Signal for the pipeline creation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">search</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onSearchClicked</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">menu_treectrl</span><span class="o">.</span><span class="n">currentItemChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onTreeSelectionChanged</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionLoad</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onLoadClicked</span><span class="p">)</span>

        <span class="c"># Signal for the execution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionRun</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onRunClicked</span><span class="p">)</span>

        <span class="c"># Set default values</span>

        <span class="c"># Set some tooltips</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.show"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Shows the widget and its child widgets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.add_controls_to_ui"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.add_controls_to_ui">[docs]</a>    <span class="k">def</span> <span class="nf">add_controls_to_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Method to find dynamic controls</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Error message template</span>
        <span class="n">error_message</span> <span class="o">=</span> <span class="s">&quot;{0} has no attribute &#39;{1}&#39;&quot;</span>

        <span class="c"># Got through the class dynamic controls</span>
        <span class="k">for</span> <span class="n">control_type</span><span class="p">,</span> <span class="n">control_item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>

            <span class="c"># Get the dynamic control name</span>
            <span class="k">for</span> <span class="n">control_name</span> <span class="ow">in</span> <span class="n">control_item</span><span class="p">:</span>

                <span class="c"># Try to set the control value to the ui class parameter</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">findChild</span><span class="p">(</span><span class="n">control_type</span><span class="p">,</span> <span class="n">control_name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="p">),</span> <span class="n">control_name</span><span class="p">))</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="p">,</span> <span class="n">control_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">error_message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="p">),</span> <span class="n">control_name</span><span class="p">))</span>

    <span class="c">###########################################################################</span>
    <span class="c"># Slots   </span>
    <span class="c">###########################################################################</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onRunClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onRunClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onRunClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to execute the process/pipeline.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">study_config</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">executer_qc_nodes</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onBrowseClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onBrowseClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onBrowseClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to show / hide the browse dock widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Show browse dock widget</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionBrowse</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetBrowse</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="c"># Hide browse dock widget</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetBrowse</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onParametersClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onParametersClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onParametersClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to show / hide the parameters dock widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Show parameters dock widget</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionParameters</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetParameters</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="c"># Hide parameters dock widget</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetParameters</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onStudyConfigClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onStudyConfigClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onStudyConfigClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to show / hide the study config dock widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Show study configuration dock widget</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionStudyConfig</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetStudyConfig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="c"># Hide study configuration dock widget</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetStudyConfig</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onQualityControlClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onQualityControlClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onQualityControlClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to show / hide the board dock widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Create and show board dock widget</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionQualityControl</span><span class="o">.</span><span class="n">isChecked</span><span class="p">():</span>

            <span class="c"># Create the board widget associated to the pipeline controller</span>
            <span class="c"># Create on the fly in order to get the last status</span>
            <span class="c"># ToDo: add callbacks</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="c"># board_widget = BoardWidget(</span>
                <span class="c">#     self.pipeline, parent=self.ui.dockWidgetParameters,</span>
                <span class="c">#     name=&quot;board&quot;)</span>
                <span class="n">board_widget</span> <span class="o">=</span> <span class="n">ScrollControllerWidget</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;outputs&quot;</span><span class="p">,</span> <span class="n">live</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                    <span class="n">hide_labels</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">select_controls</span><span class="o">=</span><span class="s">&quot;outputs&quot;</span><span class="p">,</span>
                    <span class="n">disable_controller_widget</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="c">#board_widget.setEnabled(False)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetBoard</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="n">board_widget</span><span class="p">)</span>

            <span class="c"># Show the board widget</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetBoard</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="c"># Hide board dock widget</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetBoard</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onSearchClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onSearchClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onSearchClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to refresh the menu tree control that contains the pipeline</span>
<span class="sd">        modules.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Clear the current tree control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">menu_treectrl</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="c"># Build the new filtered tree control</span>
        <span class="n">fill_treectrl</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">menu_treectrl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_menu</span><span class="p">,</span>
                      <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">search</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onTreeSelectionChanged"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onTreeSelectionChanged">[docs]</a>    <span class="k">def</span> <span class="nf">onTreeSelectionChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to refresh the pipeline load button status.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Get the cuurent item</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">menu_treectrl</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">item</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c"># Check if we have selected a pipeline in the tree and enable / disable</span>
        <span class="c"># the load button</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">url</span> <span class="o">==</span> <span class="s">&quot;None&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionLoad</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionLoad</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onRunStatus"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onRunStatus">[docs]</a>    <span class="k">def</span> <span class="nf">onRunStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to refresh the run button status.</span>

<span class="sd">        When all the controller widget controls are correctly filled, enable</span>
<span class="sd">        the user to execute the pipeline.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Get the controller widget</span>
        <span class="n">controller_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetParameters</span><span class="o">.</span><span class="n">widget</span><span class="p">()</span><span class="o">.</span><span class="n">controller_widget</span>

        <span class="c"># Get the controller widget status</span>
        <span class="n">is_valid</span> <span class="o">=</span> <span class="n">controller_widget</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>

        <span class="c"># Depending on the controller widget status enable / disable</span>
        <span class="c"># the run button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionRun</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">is_valid</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onLoadClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onLoadClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onLoadClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to load and display a pipeline.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Get the pipeline instance from its string description</span>
        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">menu_treectrl</span><span class="o">.</span><span class="n">currentItem</span><span class="p">()</span>
        <span class="n">description_list</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span>
                            <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">]</span>
        <span class="n">process_description</span> <span class="o">=</span> <span class="s">&quot;.&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">description_list</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="o">=</span> <span class="n">get_process_instance</span><span class="p">(</span><span class="n">process_description</span><span class="p">)</span>

        <span class="c"># Create the controller widget associated to the pipeline</span>
        <span class="c"># controller</span>
        <span class="n">pipeline_widget</span> <span class="o">=</span> <span class="n">ScrollControllerWidget</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">live</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">select_controls</span><span class="o">=</span><span class="s">&quot;inputs&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetParameters</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="n">pipeline_widget</span><span class="p">)</span>

        <span class="c"># Add observer to refresh the run button</span>
        <span class="n">controller_widget</span> <span class="o">=</span> <span class="n">pipeline_widget</span><span class="o">.</span><span class="n">controller_widget</span>
        <span class="k">for</span> <span class="n">control_name</span><span class="p">,</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controller_widget</span><span class="o">.</span><span class="n">_controls</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>

            <span class="c"># Unpack the control item</span>
            <span class="n">trait</span><span class="p">,</span> <span class="n">control_class</span><span class="p">,</span> <span class="n">control_instance</span><span class="p">,</span> <span class="n">control_label</span> <span class="o">=</span> <span class="n">control</span>

            <span class="c"># Add the new callback</span>
            <span class="n">control_class</span><span class="o">.</span><span class="n">add_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onRunStatus</span><span class="p">,</span> <span class="n">control_instance</span><span class="p">)</span>

        <span class="c"># Refresh manually the run button status the first time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onRunStatus</span><span class="p">()</span>

        <span class="c"># Store the pipeline documentation root path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_to_pipeline_doc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="c"># Store the pipeline instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipelines</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">pipeline_widget</span><span class="p">)</span>

        <span class="c"># Create the widget</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">PipelineDevelopperView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insert_widget_in_tab</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>

        <span class="c"># Connect the subpipeline clicked signal to the</span>
        <span class="c"># onLoadSubPipelineClicked slot</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">subpipeline_clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onLoadSubPipelineClicked</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onLoadSubPipelineClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onLoadSubPipelineClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onLoadSubPipelineClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">sub_pipeline</span><span class="p">,</span> <span class="n">modifiers</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to load and display a sub pipeline.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Store the pipeline instance in class parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">process</span>

        <span class="c"># Create the controller widget associated to the sub pipeline</span>
        <span class="c"># controller: if the sub pipeline is an IterativePipeline, disable</span>
        <span class="c"># the correspondind controller widget since this pipeline is generated</span>
        <span class="c"># on the fly an is not directly synchronized with the rest of the</span>
        <span class="c"># pipeline.</span>
        <span class="n">is_iterative_pipeline</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">IterativePipeline</span><span class="p">):</span>
            <span class="n">is_iterative_pipeline</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">pipeline_widget</span> <span class="o">=</span> <span class="n">ScrollControllerWidget</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">live</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">select_controls</span><span class="o">=</span><span class="s">&quot;inputs&quot;</span><span class="p">,</span>
            <span class="n">disable_controller_widget</span><span class="o">=</span><span class="n">is_iterative_pipeline</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetParameters</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="n">pipeline_widget</span><span class="p">)</span>

        <span class="c"># Store the sub pipeline instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipelines</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">pipeline_widget</span><span class="p">)</span>

        <span class="c"># Create the widget</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="n">PipelineDevelopperView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_insert_widget_in_tab</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>

        <span class="c"># Connect the subpipeline clicked signal to the</span>
        <span class="c"># onLoadSubPipelineClicked slot</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">subpipeline_clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">onLoadSubPipelineClicked</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onCloseTabClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onCloseTabClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onCloseTabClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to close a pipeline view.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Remove the pipeline from the intern pipeline list</span>
        <span class="n">pipeline</span><span class="p">,</span> <span class="n">pipeline_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipelines</span><span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span>
        <span class="n">pipeline_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">pipeline_widget</span><span class="o">.</span><span class="n">deleteLater</span><span class="p">()</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipelines</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span>

        <span class="c"># Remove the table that contains the pipeline</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">removeTab</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onCurrentTabChanged"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onCurrentTabChanged">[docs]</a>    <span class="k">def</span> <span class="nf">onCurrentTabChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to refresh the controller controller widget when a new</span>
<span class="sd">        tab is selected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># If no valid tab index has been passed</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">actionRun</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

        <span class="c"># A new valid tab is selected</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Get the selected pipeline widget</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">,</span> <span class="n">pipeline_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipelines</span><span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="n">index</span><span class="p">)]</span>

            <span class="c"># Set the controller widget associated to the pipeline</span>
            <span class="c"># controller</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">dockWidgetParameters</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="n">pipeline_widget</span><span class="p">)</span>

            <span class="c"># Refresh manually the run button status the first time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onRunStatus</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onHelpClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onHelpClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onHelpClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to display the documentation of the active pipeline.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Create a dialog box to display the html documentation</span>
        <span class="n">win</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QDialog</span><span class="p">()</span>
        <span class="n">win</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s">&quot;Pipeline Help&quot;</span><span class="p">)</span>

        <span class="c"># Build the pipeline documentation location</span>
        <span class="c"># Possible since common tools generate the sphinx documentation</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">:</span>

            <span class="c"># Generate the url to the active pipeline documentation</span>
            <span class="n">path_to_active_pipeline_doc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">path_to_pipeline_doc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="p">],</span> <span class="s">&quot;generated&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="s">&quot;pipeline&quot;</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">id</span> <span class="o">+</span> <span class="s">&quot;.html&quot;</span><span class="p">)</span>

            <span class="c"># Create and fill a QWebView</span>
            <span class="n">help</span> <span class="o">=</span> <span class="n">QtWebKit</span><span class="o">.</span><span class="n">QWebView</span><span class="p">()</span>
            <span class="n">help</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">QUrl</span><span class="p">(</span><span class="n">path_to_active_pipeline_doc</span><span class="p">))</span>
            <span class="n">help</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

            <span class="c"># Create and set a layout with the web view</span>
            <span class="n">layout</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">help</span><span class="p">)</span>
            <span class="n">win</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

            <span class="c"># Display the window</span>
            <span class="n">win</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>

        <span class="c"># No Pipeline loaded, cant&#39;t show the documentation message</span>
        <span class="c"># Display a message box</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QtGui</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="p">,</span> <span class="s">&quot;Information&quot;</span><span class="p">,</span> <span class="s">&quot;First load a pipeline!&quot;</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="CapsulMainWindow.onChangeViewClicked"><a class="viewcode-back" href="../../../gui_tree/generated/capsul-apps/capsul.qt_apps.main_window.CapsulMainWindow.html#capsul.qt_apps.main_window.CapsulMainWindow.onChangeViewClicked">[docs]</a>    <span class="k">def</span> <span class="nf">onChangeViewClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Event to switch between simple and full pipeline views.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Check if a pipeline has been loaded</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_active_pipeline_valid</span><span class="p">():</span>

            <span class="c"># Check the current display mode</span>
            <span class="c"># Case PipelineDevelopperView</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">currentWidget</span><span class="p">(),</span>
                          <span class="n">PipelineDevelopperView</span><span class="p">):</span>

                <span class="c"># Switch to PipelineUserView display mode</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">PipelineUserView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_insert_widget_in_tab</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>

            <span class="c"># Case PipelineUserView</span>
            <span class="k">else</span><span class="p">:</span>

                <span class="c"># Switch to PipelineDevelopperView display mode</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">PipelineDevelopperView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_insert_widget_in_tab</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>

        <span class="c"># No pipeline loaded error</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;No active pipeline selected. &quot;</span>
                          <span class="s">&quot;Have you forgotten to click the load pipeline &quot;</span>
                          <span class="s">&quot;button?&quot;</span><span class="p">)</span>

    <span class="c">#####################</span>
    <span class="c"># Private interface #</span>
    <span class="c">#####################</span>
</div>
    <span class="k">def</span> <span class="nf">_insert_widget_in_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Insert a new widget or replace an existing widget.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        widget: a widget (mandatory)</span>
<span class="sd">            the widget we want to draw</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Search if the tab corresponding to the widget has already been created</span>
        <span class="n">already_created</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># Go through all the tabs</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">count</span><span class="p">()):</span>

            <span class="c"># Check if we have a match: the tab name is equal to the current</span>
            <span class="c">#pipeline name</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">tabText</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
                <span class="n">already_created</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>

        <span class="c"># If no match found, add a new tab with the widget</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">already_created</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span>
                <span class="n">widget</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># Otherwise, replace the widget from the match tab</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Delete the tab</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">removeTab</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

            <span class="c"># Insert the new tab</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">insertTab</span><span class="p">(</span>
                <span class="n">index</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="nb">unicode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

            <span class="c"># Set the corresponding index</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ui</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">_is_active_pipeline_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Method to ceack that the active pipeline is valid</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        is_valid: bool</span>
<span class="sd">            True if the active pipeline is valid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span></div>
</pre></div>

          </div>
        </div>
      </div>
    <div class="clearer">
    </div>
  </div>
  
</div>

<div class="footer">
    &copy; 2013, CAPSUL developers &lt;antoine.grigis@cea.fr&gt;.
</div>
  </body>
</html>